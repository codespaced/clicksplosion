!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},i={},s={},n={}.hasOwnProperty,r=/^\.\.?(\/|$)/,a=function(e,t){for(var i,s=[],n=(r.test(t)?e+"/"+t:t).split("/"),a=0,o=n.length;a<o;a++)i=n[a],".."===i?s.pop():"."!==i&&""!==i&&s.push(i);return s.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(i){var s=a(o(t),i);return e.require(s,t)}},c=function(e,t){var s=y&&y.createHot(e),n={id:e,exports:{},hot:s};return i[e]=n,t(n.exports,l(e),n),n.exports},h=function(e){return s[e]?h(s[e]):e},p=function(e,t){return h(a(o(e),t))},u=function(e,s){null==s&&(s="/");var r=h(e);if(n.call(i,r))return i[r].exports;if(n.call(t,r))return c(r,t[r]);throw new Error("Cannot find module '"+e+"' from '"+s+"'")};u.alias=function(e,t){s[t]=e};var f=/\.[^.\/]+$/,m=/\/index(\.[^\/]+)?$/,d=function(e){if(f.test(e)){var t=e.replace(f,"");n.call(s,t)&&s[t].replace(f,"")!==t+"/index"||(s[t]=e)}if(m.test(e)){var i=e.replace(m,"");n.call(s,i)||(s[i]=e)}};u.register=u.define=function(e,s){if(e&&"object"==typeof e)for(var r in e)n.call(e,r)&&u.register(r,e[r]);else t[e]=s,delete i[e],d(e)},u.list=function(){var e=[];for(var i in t)n.call(t,i)&&e.push(i);return e};var y=e._hmr&&new e._hmr(p,u,t,i);u._cache=i,u.hmr=y&&y.wrap,u.brunch=!0,e.require=u}}(),function(){"undefined"==typeof window?this:window;require.register("components/label/label.ts",function(e,t,i){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(t,i,s,n,r,a,o){var l=e.call(this,t,i,s,n,r,a,o)||this;return l.value=0,l.buffer=0,l.step=1,l.throttle=!1,l.countUp=!0,l.prefix="",l}return s(t,e),t.prototype.setLabel=function(e){var t=e-this.value;return this.buffer=this.countUp?t:-t,this.update()},t.prototype.increase=function(e){this.buffer+=e},t.prototype.update=function(){return this.setStep(this.buffer),this.consumeBuffer(),this.text=this.prefix+this.value.toString(),this.countUp?this.value+this.buffer:this.value-this.buffer},t.prototype.setStep=function(e){this.step=this.throttle?this.rateOfChange(e):1},t.prototype.consumeBuffer=function(){var e=Math.min(this.buffer,this.step);this.buffer-=e,this.countUp?this.value+=e:this.value-=e},t.prototype.rateOfChange=function(e){return e>1e6?999999:e>1e5?99999:e>1e4?9999:e>1e3?999:e>100?99:e>10?9:1},t}(Phaser.GameObjects.BitmapText);e["default"]=n}),require.register("initialize.ts",function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("./scenes/game");new Phaser.Game({type:Phaser.AUTO,scale:{mode:Phaser.Scale.RESIZE,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{"default":"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[s["default"]]})}),require.register("scenes/game.ts",function(e,t,i){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=t("../components/label/label"),r=function(e){function t(){var t=e.call(this,{key:"gameScene",active:!0})||this;return t.enemyCount=0,t.level=1,t.font="consolasBold",t.levelNumberFont="clarendon",t.enabled=!1,t.magic_initial_velocity_multiplier=70,t.magic_per_level_velocity_multiplier=15,t.magic_maximum_velocity_multiplier=500,t.magic_initial_number_of_enemies=5,t.magic_per_level_number_of_enemies=3,t.magic_maximum_number_of_enemies=100,t.magic_initial_enemy_delay=250,t.magic_per_level_enemy_delay=-5,t.magic_minimum_enemy_delay=25,t.magic_level_delay=2e3,t.magic_initial_reticle_radius=10,t.magic_per_level_reticle_radius=2,t.magic_initial_hit_points=1,t.magic_per_level_hit_points=2,t.magic_experience_per_enemy_multiplier=10,t.velocity_multiplier=t.magic_initial_velocity_multiplier,t.number_of_enemies=t.magic_initial_number_of_enemies,t.reticle_radius=t.magic_initial_reticle_radius,t.hit_points=t.magic_initial_hit_points,t.enemy_delay=t.magic_initial_enemy_delay,t}return s(t,e),t.prototype.preload=function(){this.width=this.cameras.main.width,this.height=this.cameras.main.height,this.centerX=this.cameras.main.width/2,this.centerY=this.cameras.main.height/2;var e=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(240,270,320,50);var i=this.make.text({x:this.centerX,y:this.centerY-50,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});i.setOrigin(.5,.5);var s=this.make.text({x:this.centerX,y:this.centerY-5,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});s.setOrigin(.5,.5);var n=this.make.text({x:this.centerX,y:this.centerY+50,text:"",style:{font:"18px monospace",fill:"#ffffff"}});n.setOrigin(.5,.5),this.load.on("progress",function(t){s.setText(100*t+"%"),e.clear(),e.fillStyle(16777215,1),e.fillRect(250,280,300*t,30)}),this.load.on("fileprogress",function(e){n.setText("Loading asset: "+e.key)}),this.load.on("complete",function(){e.destroy(),t.destroy(),i.destroy(),s.destroy(),n.destroy()}),this.load.spritesheet("mage","assets/cast.png",{frameWidth:64,frameHeight:68,endFrame:3}),this.load.spritesheet("enemy","assets/floating_thing.png",{frameWidth:45,frameHeight:72}),this.load.atlas("explosion","assets/particles/explosion.png","assets/particles/explosion.json"),this.load.bitmapFont("clarendon","assets/fonts/bitmap/clarendon.png","assets/fonts/bitmap/clarendon.xml"),this.load.bitmapFont("consolasBold","assets/fonts/consolasBold_0.png","assets/fonts/consolasBold.fnt")},t.prototype.create=function(){this.enemies=this.physics.add.group(),this.animations=this.add.group(),this.player=this.physics.add.sprite(this.centerX,this.height-64,"mage"),this.player.setOrigin(.5,.5).setCollideWorldBounds(!0).setImmovable(),this.createReticle(),this.healthLabel=this.createLabel(this.healthLabel,100,10,this.font,0,.5,!1,!1,"Health: ").setDepth(1),this.scoreLabel=this.createLabel(this.scoreLabel,this.width-100,10,this.font,1,.5,!0,!0,"Score: ").setDepth(1),this.levelLabel=this.createLabel(this.levelLabel,this.centerX,10,this.font,.5,.5,!1,!0,"Level: ").setDepth(1),this.levelNumber=this.add.bitmapText(this.centerX,this.centerY,this.levelNumberFont,"1").setOrigin(.5,.5).setDepth(1),this.waitForClick("Click\nto\nBegin"),this.time.addEvent({delay:this.enemy_delay,loop:!0,callback:this.addEnemy,callbackScope:this}),this.physics.add.collider(this.player,this.enemies,this.onCollision,null,this),this.createExplosion();var e={key:"castAnimation",frames:this.anims.generateFrameNumbers("mage",{start:0,end:3}),frameRate:20,repeat:0};this.anims.create(e),this.input.on("pointerdown",function(e){this.explosion.emitParticleAt(e.x,e.y),this.reticle.x=e.x,this.reticle.y=e.y,this.reticleCollider.active=!0,this.createFadeAnimation(this.reticle),this.player.play("castAnimation")},this)},t.prototype.createExplosion=function(){this.explosion=this.add.particles("explosion"),this.explosion.createEmitter({frame:"muzzleflash2",lifespan:150,scale:{start:1,end:0},rotate:{start:0,end:360},on:!1,blendMode:Phaser.BlendModes.ADD})},t.prototype.createLabel=function(e,t,i,s,r,a,o,l,c){return e=new n["default"](this,t,i,s).setOrigin(r,a).setVisible(!0),this.add.existing(e),e.throttle=o,e.countUp=l,e.prefix=c,e},t.prototype.createFloatAnimation=function(e,t,i,s,n){var r=this.add.bitmapText(e,t,this.font,i).setTint(s);n.add(r);this.add.tween({targets:r,duration:750,ease:"Exponential.In",y:t-50,onComplete:function(){r.destroy()},callbackScope:this})},t.prototype.createFadeAnimation=function(e){var t=this;this.add.tween({targets:e,duration:100,ease:"Linear",alpha:{getStart:function(){return.5},getEnd:function(){return 0}},onComplete:function(){t.reticleCollider.active=!1},callbackScope:this})},t.prototype.createLevelAnimation=function(){var e=this;this.add.tween({targets:this.levelNumber,scaleX:1.5,scaleY:1.5,duration:500,hold:250,yoyo:!0,repeat:0,ease:"Quad.easeInOut",onComplete:function(){e.enabled=!0,e.levelNumber.visible=!1},callbackScope:this,onYoyocallbackScope:this})},t.prototype.onCollision=function(e,t){t.destroy();var i=Math.round(this.level/2);this.createFloatAnimation(t.x,t.y,"-"+i,16724787,this.animations),this.healthLabel.increase(i),this.checkWinLose()},t.prototype.onZwat=function(e,t){var i=this.level*this.magic_experience_per_enemy_multiplier;this.scoreLabel.increase(i),this.createFloatAnimation(t.x,t.y,"+"+i,16776960,this.animations),t.destroy(),this.updateUi(),this.checkWinLose()},t.prototype.checkWinLose=function(){this.checkWin(),this.checkLose()},t.prototype.isDead=function(){return this.healthLabel.value<=0},t.prototype.die=function(){console.log("Alas, you have expired."),this.waitForClick()},t.prototype.waitForClick=function(e){void 0===e&&(e="GAME\nOVER"),this.physics.pause();var t=this.add.text(this.centerX,this.centerY,e,{fontFamily:"Impact",color:"#ffffff",align:"center",fontSize:"128px"});t.setDepth(1).setOrigin(.5,.5).setVisible(!0).setStroke("#de77ae",8),this.input.once("pointerdown",function(e){t.destroy(),this.physics.resume(),this.newGame()},this)},t.prototype.newGame=function(){this.enemyCount=0,this.scoreLabel.value=0,this.updateUi(),this.animations.clear(!0,!0),this.enemies.clear(!0,!0),this.level=1,this.levelUp()},t.prototype.checkWin=function(){this.beatLevel()&&(this.level+=1,this.enemyCount=0,this.levelUp())},t.prototype.checkLose=function(){this.isDead()&&this.die()},t.prototype.beatLevel=function(){return 0===this.enemies.children.size},t.prototype.levelUp=function(){this.enabled=!1,this.levelNumber.setText(""+this.level),this.levelNumber.setVisible(!0),this.createLevelAnimation(),this.updateVelocity(),this.updateNumberOfEnemies(),this.updateHitPoints(),this.updateEnemyDelay(),this.updateReticle(),this.levelLabel.setLabel(this.level)},t.prototype.updateReticle=function(){var e=this.magic_initial_reticle_radius+this.magic_per_level_reticle_radius*this.level-1;this.reticle_radius=e,this.updateReticleTexture()},t.prototype.updateEnemyDelay=function(){var e=this.magic_initial_enemy_delay+this.magic_per_level_enemy_delay*(this.level-1);this.enemy_delay=Math.max(this.magic_minimum_enemy_delay,e)},t.prototype.updateHitPoints=function(){this.hit_points=this.magic_initial_hit_points+this.triangleNumber(this.level),this.healthLabel.setLabel(this.hit_points)},t.prototype.updateNumberOfEnemies=function(){this.number_of_enemies=this.magic_initial_number_of_enemies+this.magic_per_level_number_of_enemies*(this.level-1)},t.prototype.updateVelocity=function(){var e=this.magic_initial_velocity_multiplier+this.magic_per_level_velocity_multiplier*(this.level-1);this.velocity_multiplier=Math.min(this.magic_maximum_velocity_multiplier,e)},t.prototype.addEnemy=function(){if(this.enabled&&!(this.enemyCount>this.number_of_enemies)){var e=[{x0:0,x1:0,y0:0,y1:.6*this.height},{x0:0,x1:this.width,y0:0,y1:0},{x0:this.width,x1:this.width,y0:0,y1:.6*this.height}][Math.floor(3*Math.random())],t=this.physics.add.sprite(Phaser.Math.Between(e.x0,e.x1),Phaser.Math.Between(e.y0,e.y1),"enemy");this.enemyCount+=1,this.enemies.add(t),this.activateEnemy(t)}},t.prototype.activateEnemy=function(e){e.setActive(!0).setVisible(!0).setScale(.5);var t=this.subtract(this.player.getCenter(),e.getCenter());t.normalize(),e.setVelocityX(t.x*this.velocity_multiplier),e.setVelocityY(t.y*this.velocity_multiplier),e.setDebug(!1,!1,0)},t.prototype.updateUi=function(){this.scoreLabel.update(),this.healthLabel.update(),this.levelLabel.update()},t.prototype.subtract=function(e,t,i){return"undefined"==typeof i&&(i=new Phaser.Math.Vector2),i.x=e.x-t.x,i.y=e.y-t.y,i},t.prototype.update=function(e,t){this.updateUi()},t.prototype.createReticle=function(){var e=this.generateReticleTexture();this.reticle=this.physics.add.image(-100,-100,e),this.reticle.setDebug(!1,!1,16776960),this.reticleCollider=this.physics.add.overlap(this.reticle,this.enemies,this.onZwat,null,this)},t.prototype.generateReticleTexture=function(){var e=this.reticle_radius,t="reticle"+e,i=16776960,s=2,n=1,r=this.make.graphics({x:0,y:0,add:!1}).lineStyle(s,i,n).strokeCircle(e,e,e).generateTexture(t,2*e,2*e);return r.destroy(),t},t.prototype.updateReticleTexture=function(){this.reticle.setCircle(this.reticle_radius);var e=this.generateReticleTexture();this.reticle.setTexture(e)},t.prototype.triangleNumber=function(e){return e*(e+1)*.5},t}(Phaser.Scene);e["default"]=r}),require.register("scenes/reticle.ts",function(e,t,i){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.preload=function(){this.load.spritesheet("reticle","assets/floating_thing.png",{frameWidth:45,frameHeight:72})},t.prototype.create=function(){this.physics.world.setBounds(0,0,1600,1200),this.reticle=this.physics.add.sprite(300,400,"reticle"),this.reticle.setVisible(!0),console.log(this.reticle.texture),this.input.on("pointermove",function(e){this.reticle.x=e.x,this.reticle.y=e.y},this)},t}(Phaser.Scene);e["default"]=n}),require.register("___globals___",function(e,t,i){})}(),require("___globals___"),require("initialize");